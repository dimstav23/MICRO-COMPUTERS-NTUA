; ASKHSH 2
IN 10H 			; AIREI THN PROSTASIA THS MNHMHS
BEGIN:	
CALL KIND 	;KALEI THN DIADIKASIA KIND GIA ;ANAGNWSH APO PLHKTROLOGIO
;H TIMH APO TO PLHKTROLOGIO ;ANA8ETETAI STON KATAXWRHTH A
;CHECKARW AN H TIMH POU MOU DO8HKE ;EINAI APODEKTH 
		   		;APO 1 EWS 8 DHLADH
	STC 			;THETOUME THN TIMH TOU C FLAG ISH ME 				;	1
	CMC 			;TO THETOUME TWRA ISO ME TO 0 GIA 					;APOFYGH PROVLHMATWN	
	CPI 01H  		;CHECKARW AN EINAI MIKROTERO APO TO 1
	JC TURN_OFF
	JC BEGIN 		;AN EINAI MIKROTERO APO TO 1 						;KSANADIAVASE
	STC 			;THETOUME THN TIMH TOU C FLAG ISH ME 				;1
	CPI 08H 		;CHECKARW AN EINAI MEGALYTERO APO TO 				;8
	JZ SET		;AN EINAI ISO ME 8 EKTELW KANONIKA
	JNC BEGIN 	;AN EINAI MEGALYTERO APO 8 						;KSANADIAVASE
				;JNC TURN_OFF

SET: MVI B,01H 	;8ETW TON COUNTER B ISO ME 1
MVI C,01H 	;8ETW TON C ISO ME 1 GIA TO ANAMMA ;TOU PRWTOU LED

CHECK: CMP B 		;CHECKARW POSO EINAI TO A
	JZ TURN_ON	;AN A=B ANAPSE TO ANTISTOIXO LED
	INR B		;ALLIWS AY3HSE TO B
	MOV E,A	
	MOV A,C
	RAL			;OLIS8HSE TO C KATA MIA 8ESH GIA NA 				;ANAPSEI TO EPOMENO 
				;LED AN VRE8EI O ARI8MOS
	MOV C,A
	MOV A,E		;EPANAFORA THS TIMHS TOU A
	JMP CHECK		;PHGAINE NA CHECKAREIS AN EINAI ISOS 				;ME TON EPOMENO ARI8MO

TURN_ON: MOV A,C
         CMA
	  STA 3000H 	;ANAVW TA LEDS VASEI THS 8ESHS TOU 				;ASSOU TOU KATAXWRHTH C
	  JMP BEGIN

TURN_OFF: MVI A,FFH	
	     STA 3000H
	     JMP BEGIN

END:     END
