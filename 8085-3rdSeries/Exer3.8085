IN 10H 				;AIREI THN PROSTASIA MNHMHS
					;THA CKECKAROUME MIA MIA TH 						;GRAMMH GIA NA DOUME TI EXEI 						;PATH8EI
					;THA EKKINHSOUME APO THN KATW 					;KATW GRAMMH
	
					;CHECKAROUME TH THESH MNHMHS 						;1800H GIA NA DOUME POIO EINAI 					;PATHMENO
					;KAI NA TO TYPWSOUME AN EINAI 					;ONTWS PATHMENO

LINE1:		MVI A,7FH ;01111111 EPILOGH 1HS GRAMMHS
			STA 2800H ;TO APO8HKEYOUME STH THESH 2800H 					;POU EPILEGEI TH GRAMMH
		   	   		;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME	
					;CHECKAROUME TH THESH MNHMHS 						;1800H GIA NA DOUME POIO EINAI 					;PATHMENO
					;KAI NA TO TYPWSOUME AN EINAI 					;ONTWS PATHMENO

		LDA 1800H 	;FORTWNOUME TO PERIEXOMENH THS 					;THESHS MNHMHS 1800H
		ANI 07H   	;KANW AND ME 00000111 GIA NA 						;KRATHSW 3 TELEYTAIA BITS
		RAR 			;OLIS8HSH DE3IA GIA NA DW TO 						;PRWTO BIT
		JNC D
		RAR 			;OLIS8HSH GIA TO DEYTERO BIT
		JNC E
		RAR 			;OLIS8HSH GIA TO TRITO BIT
		JNC F

LINE2:	MVI A,BFH 	;10111111 GIA EPILOGH 2HS 						;GRAMMHS
		STA 2800H 	;TO APO8HKEYOUME STH THESH 2800H 					;POU EPILEGEI TH GRAMMH
		   	   		;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H 	;FORTWNOUME TO PERIEXOMENO THS 					;THESHS MNHMHS 1800H
		ANI 07H   	;KANW AND ME 00000111 GIA NA 						;KRATHSW 3 TELEYTAIA BITS
		RAR 			;OLIS8HSH DE3IA GIA NA DW TO 						;PRWTO BIT
		JNC A
		RAR 			;OLIS8HSH GIA TO DEYTERO BIT
		JNC B
		RAR 			;OLIS8HSH GIA TO TRITO BIT
		JNC C	

LINE3:	MVI A,DFH 	;11011111 GIA EPILOGH 3HS 						;GRAMMHS
		STA 2800H 	;TO APO8HKEYOUME STH THESH 2800H 					;POU EPILEGEI TH GRAMMH
		   	   		;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H 	;FORTWNOUME TO PERIEXOMENH THS 					;THESHS MNHMHS 1800H
		ANI 07H   	;KANW AND ME 00000111 GIA NA 						;KRATHSW 3 TELEYTAIA BITS
		RAR 			;OLIS8HSH DE3IA GIA NA DW TO 						;PRWTO BIT
		JNC N7
		RAR 			;OLIS8HSH GIA TO DEYTERO BIT
		JNC N8
		RAR 			;OLIS8HSH GIA TO TRITO BIT
		JNC N9	

LINE4:	MVI A,EFH 	;11101111 GIA EPILOGH 4HS 						;GRAMMHS
		STA 2800H 	;TO APO8HKEYOUME STH THESH 2800H 					;POU EPILEGEI TH GRAMMH
		   	   		;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H 	;FORTWNOUME TO PERIEXOMENH THS 					;THESHS MNHMHS 1800H
		ANI 07H   ;KANW AND ME 00000111 GIA NA KRATHSW 				;3 TELEYTAIA BITS
		RAR 		;OLIS8HSH DE3IA GIA NA DW TO PRWTO 				;BIT
		JNC N4
		RAR 		;OLIS8HSH GIA TO DEYTERO BIT
		JNC N5
		RAR 		;OLIS8HSH GIA TO TRITO BIT
		JNC N6	

LINE5:	MVI A,F7H ;11110111 GIA EPILOGH 5HS GRAMMHS
		STA 2800H ;TO APO8HKEYOUME STH THESH 2800H POU 				;EPILEGEI TH GRAMMH
		   	   	;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H ;FORTWNOUME TO PERIEXOMENH THS THESHS 				;MNHMHS 1800H
		ANI 07H   ;KANW AND ME 00000111 GIA NA KRATHSW 				;3 TELEYTAIA BITS
		RAR 		;OLIS8HSH DE3IA GIA NA DW TO PRWTO 				;BIT
		JNC N1
		RAR 		;OLIS8HSH GIA TO DEYTERO BIT
		JNC N2
		RAR 		;OLIS8HSH GIA TO TRITO BIT
		JNC N3
	
LINE6:	MVI A,FBH ;11111011 GIA EPILOGH 6HS GRAMMHS
		STA 2800H ;TO APO8HKEYOUME STH THESH 2800H POU 				;EPILEGEI TH GRAMMH
		   	   	;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H ;FORTWNOUME TO PERIEXOMENH THS THESHS 				;MNHMHS 1800H
		ANI 07H   ;KANW AND ME 00000111 GIA NA KRATHSW 				;3 TELEYTAIA BITS
		RAR 		;OLIS8HSH DE3IA GIA NA DW TO PRWTO 				;BIT
		JNC N0
		RAR 		;OLIS8HSH GIA TO DEYTERO BIT
		
		JNC STORE_INCR
		
		RAR 		;OLIS8HSH GIA TO TRITO BIT
		JNC DECR

LINE7:	MVI A,FDH ;11111101 GIA EPILOGH 7HS GRAMMHS
		STA 2800H ;TO APO8HKEYOUME STH THESH 2800H POU 				;EPILEGEI TH GRAMMH
		   	   	;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H 	;FORTWNOUME TO PERIEXOMENH THS 					;THESHS MNHMHS 1800H
		ANI 07H   	;KANW AND ME 00000111 GIA NA						;KRATHSW 3 TELEYTAIA BITS
		RAR 			;OLIS8HSH DE3IA GIA NA DW TO 						;PRWTO BIT
		JNC RUNB
		RAR 			;OLIS8HSH GIA TO DEYTERO BIT
		JNC FETCH_REG
		RAR 			;OLIS8HSH GIA TO TRITO BIT
		JNC FETCH_ADDRESS

LINE8:		
		MVI A,FEH 	;11111110 GIA EPILOGH 8HS 						;GRAMMHS
		STA 2800H 	;TO APO8HKEYOUME STH THESH 2800H 					;POU EPILEGEI TH GRAMMH
		   	   		;OPWS FAINETAI APO TO SXHMA POU 					;EXOUME 
		LDA 1800H 	;FORTWNOUME TO PERIEXOMENH THS 					;THESHS MNHMHS 1800H
		ANI 07H   	;KANW AND ME 00000111 GIA NA 						;KRATHSW 3 TELEYTAIA BITS
		RAR 			;OLIS8HSH DE3IA GIA NA DW TO 						;PRWTO BIT
		JNC INSTR_STEP
		RAR 			;OLIS8HSH GIA TO DEYTERO BIT
		JNC FETCH_PC
		RAR 			;OLIS8HSH GIA TO TRITO BIT
		JNC HDWR_STEP 	;TO OPOIO DEN PROVALLETAI STO 7SEGMENT DISPLAY					;7SEGMENTDISPLAY
		
NONE_PRESSED: 
		  MVI D,10H 	;SVHNW TO 7 SEGMENT
	       MVI E,10H  
	       JMP PRINT

D: MVI D,0DH
   MVI E,00H
   JMP PRINT

E: MVI D,0EH
   MVI E,00H
   JMP PRINT

F: MVI D,0FH
   MVI E,00H
   JMP PRINT

A: MVI D,0AH
   MVI E,00H
   JMP PRINT

B: MVI D,0BH
   MVI E,00H
   JMP PRINT

C: MVI D,0CH
   MVI E,00H
   JMP PRINT

N7: MVI D,07H
    MVI E,00H
    JMP PRINT

N8: MVI D,08H
    MVI E,00H
    JMP PRINT

N9: MVI D,09H
    MVI E,00H
    JMP PRINT

N4: MVI D,04H
    MVI E,00H
    JMP PRINT

N5: MVI D,05H
    MVI E,00H
    JMP PRINT

N6: MVI D,06H
    MVI E,00H
    JMP PRINT

N1: MVI D,01H
    MVI E,00H
    JMP PRINT

N2: MVI D,02H
    MVI E,00H
    JMP PRINT

N3: MVI D,03H
    MVI E,00H
    JMP PRINT

N0: MVI D,00H
    MVI E,00H
    JMP PRINT


STORE_INCR:	
		MVI D,03H
  		MVI E,08H
		JMP PRINT

DECR:	
		MVI D,01H
  		MVI E,08H
		JMP PRINT

RUNB:	MVI D,04H
  		MVI E,08H
		JMP PRINT

FETCH_REG:
		MVI D,00H
 		MVI E,08H
		JMP PRINT

FETCH_ADDRESS: 
		 MVI D,02H
  		 MVI E,08H
		 JMP PRINT

INSTR_STEP:	
		MVI D,06H
  		MVI E,08H
		JMP PRINT

FETCH_PC:	
		MVI D,05H
  		MVI E,08H
		JMP PRINT

HDWR_STEP:    
JMP LINE1 				;DEN KANW TIPOTA GIATI 							;EINAI AXRHSIMOPOIHTO 							;CHECKARW KSANA
		
PRINT:		
		LXI H,0A00H 		; 8ESH MNHMHS GIA EMFANISH
		MVI B,10H 		;SVHNW TA 4 LS DIGITS TOU 						;7SEGMENT
		MOV M,B 
		INX H
		MOV M,B
		INX H
		MOV M,B
		INX H
		MOV M,B
		INX H 		; 8ESH GIA TO 2O SHMANTIKO 						;PSHFIOU TOU BUTTON MAS
		MOV M,D 		;TO 2O SHMANTIKO PSHFIO EINAI 					;STON KATAXWRHTH D
		INX H 		;8ESH GIA TO 1O SHMANTIKO 						;PSHFIOU TOUS BUTTON MAS
		MOV M,E 		;TO 1O SHMANTIKO PSHFIO EINAI 					;STO KATAXWRHTH E
		LXI D,0A00H 
		CALL STDM
		CALL DCD
		JMP LINE1
		END
